apiVersion: tekton.dev/v1alpha1
kind: TriggerBinding
metadata:
  name: my-trigger-binding
spec:
  params:
  #- name: gitrevision
  #  value: $(body.head_commit.id)
  #- name: gitrepositoryurl
  #  value: $(body.repository.url)
  #- name: contenttype
  #  value: $(header.Content-Type)
---
apiVersion: tekton.dev/v1alpha1
kind: TriggerTemplate
metadata:
  name: my-trigger-template
spec:
  params:
  #- name: gitrevision
  #  description: The git revision
  #  default: master
  #- name: gitrepositoryurl
  #  description: The git repository url
  #- name: message
  #  description: The message to print
  #  default: This is the default message
  #- name: contenttype
  #  description: The Content-Type of the event
  resourcetemplates:
  - apiVersion: tekton.dev/v1alpha1
    kind: PipelineRun
    metadata:
      generateName: my-triggered-run
    spec:
      pipelineRef:
        name: my-pipeline
      serviceAccountName: 'default'
      resources:
      - name: source-repo
        resourceRef:
          name: my-git
---
apiVersion: tekton.dev/v1alpha1
kind: EventListener
metadata:
  name: my-listener
spec:
  serviceAccountName: my-account
  triggers:
  - name: trigger-one
    binding:
      name: my-trigger-binding
    template:
      name: my-trigger-template
